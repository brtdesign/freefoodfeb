<!DOCTYPE html>
<html lang="en" class="no-js">
<meta charset="utf-8">
<script>
    document.documentElement.className = document.documentElement.className.replace("no-js","js");
</script>
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link href='//fonts.googleapis.com/css?family=Sorts+Mill+Goudy%7COpen+Sans:300,600:latin%7CSource+Sans+Pro:400,700' rel='stylesheet' type='text/css'>
<link rel="stylesheet" href="assets/css/default.css" type="text/css">


</head>
   <body>

      <div class="wrapper">
      <h1 class="fff-header">
       <!-- need to fix this onerror'ing as a generic -->
        <img src="assets/images/svg/fff-header.svg" onerror="this.onerror=null; this.src='image.png'" alt="Free Food February">
       </h1>
     <nav class="navigation" role="navigation"><a href="themes" id="js-themes-nav">Show all themes</a></nav>


            <div class="theme__holder loading">
              <section class="theme__card theme__card--one"><h1 class="theme__card__header">come slim with me</h1>
                  <a href="slim-with-me.html">
                      <img src="assets/images/invites/thumb1.jpg" class="theme__card__image">

                  </a>
              </section>
              <section class="theme__card theme__card--two"><h1 class="theme__card__header">Fakeaway treat night</h1>
                  <a href="#theme-one">

                      <img src="assets/images/invites/thumb2.jpg" class="theme__card__image">

                  </a>
              </section>
              <section class="theme__card theme__card--three"><h1 class="theme__card__header">hangover party</h1>
                  <a href="#theme-one">

                      <img src="assets/images/invites/thumb3.jpg" class="theme__card__image">

                  </a>
              </section>
              <section class="theme__card theme__card--four"><h1 class="theme__card__header">Valentines dinner</h1>
                  <a href="#theme-one">

                      <img src="assets/images/invites/thumb4.jpg" class="theme__card__image">

                  </a>
              </section>
              <section class="theme__card theme__card--five"><h1 class="theme__card__header">budget party</h1>
                  <a href="#theme-one">

                      <img src="assets/images/invites/thumb1.jpg" class="theme__card__image">

                  </a>
              </section>
              <section class="theme__card theme__card--six"><h1 class="theme__card__header">Sunday lunch</h1>
                  <a href="#theme-one">

                      <img src="assets/images/invites/thumb2.jpg" class="theme__card__image">

                  </a>
              </section>
              <section class="theme__card theme__card--seven"><h1 class="theme__card__header">Chinese banquet</h1>
                  <a href="#theme-one">

                      <img src="assets/images/invites/thumb3.jpg" class="theme__card__image">

                  </a>
              </section>
              <section class="theme__card theme__card--eight"><h1 class="theme__card__header">theme eight</h1>
                  <a href="#theme-one">

                      <img src="assets/images/invites/thumb4.jpg" class="theme__card__image">

                  </a>
              </section>
              <section class="theme__card theme__card--nine"><h1 class="theme__card__header">theme nine</h1>
                  <a href="#theme-one">

                      <img src="assets/images/invites/thumb1.jpg" class="theme__card__image">

                  </a>
              </section>
              <section class="theme__card theme__card--ten"><h1 class="theme__card__header">theme ten</h1>
                   <a href="#theme-one">

                      <img src="assets/images/invites/thumb2.jpg" class="theme__card__image">
                  </a>
              </section>

           </div>
       </div>
   </body>
   <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
   <script src="assets/js/libs/jquery.arctext.js"></script>
   <script src="assets/js/libs/masonry.min.js"></script>
   <script src="assets/js/libs/jquery.transit.min.js"></script>

   <script>
    $(document).ready(function() {

       setupMasonary();

       $('.theme__holder').removeClass('loading');
       $('.theme__card__header').arctext({radius: 280});

    // click event listener for the individual cards
       themeListener();

}); // close $ready



setupMasonary=function(){
   // arrange items using masonary
        var $container = $('.theme__holder');
        $container.masonry({
          itemSelector: '.theme__card'
        });
   };

themeListener = function(){

    // listener on navigation item
    $('#js-themes-nav').click(function(event){
        event.preventDefault();
        createCardLayout();
    });

    // click event listeners on the theme cards
    $('.theme__card').click(function(event){
        event.preventDefault;
        createAllThumbs();
    });

};

// function to animate into position as a thumbnail item
fadeCardOut = function(elem){

    var posy= elem.attr('data-val-posy'); // change the speed based on the start location so we get a smoother transition

    console.log(posy);

    elem.transition({ // requires transit.js
    //top:0,
    //left:0,
    scale:0.5,
   // rotate:'-65deg',
    opacity:'0',
    },
    275,
    'easeInOutSine'
    )
}



createAllThumbs=function(){
    // store all the card onjects in an array, we loop through them later to create the sequential animations etc

        $.each(cardArray, function(i, val) {

            // store the original positions so we can come back to them
            var position=$(val).position();
            $(val).attr('data-val-posx',  position.left);
            $(val).attr('data-val-posy',  position.top);

            setTimeout(function() {
                fadeCardOut($(val));
            }, (i-1) * 125);
        });

    $('.navigation').transition({
        opacity:1,
        left:+120,
    });
   };


// this repositions the cards in the position they were at before we moved them out of shot, - they all get assigned data-val-position attribs
createCardLayout=function(){
  $.each(cardArray, function(i, val) {

      posLeft=$(val).attr('data-val-posx'); // we assign these on the fade out trtansition
      posTop=$(val).attr('data-val-posy');

         setTimeout(function() {
            $(val).transition({ // requires transit.js
            //top:+posTop,
            //left:+posLeft,
            scale:1,
            //rotate:'-360deg',
            opacity:'1',
            },
            275,
            'easeInOutSine'
            )


            }, (i-1) * 125);

      })


    }





// store the cards as an array. Doesnt seem to work on doc ready
    var cards = $('.theme__card');
    var cardArray = $.makeArray(cards);



   </script>
</html>
